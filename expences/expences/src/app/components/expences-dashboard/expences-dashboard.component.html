<div class="flex flex-column">
    <div class="flex bg-primary justify-content-center align-items-center p-4 mb-1">
        <h1>Expences Dashboard</h1>
    </div>

    <div class="card flex">
        <span class="flex align-items-center">Filter Data<p-inputSwitch [(ngModel)]="showFilters"></p-inputSwitch></span>
    </div>

    <p-card *ngIf="!showFilters">
        <p-table [columns]="cols" [value] = 'expenses' selectionMode="multiple" [(selection)]="selectedExpenses" [exportHeader]="'customExportHeader'" [tableStyle]="{ 'min-width': '50rem' }">
            <ng-template pTemplate="caption">
                <div class="flex">
                    <button type="button" pButton pRipple icon="pi pi-file-excel" (click)="downloadExcel()" class="p-button-sucess mr-2" pTooltip="XLS" tooltipPosition="bottom"></button>
                </div>
            </ng-template>
            <ng-template pTemplate="header" let-columns >
                <tr>
                    <th *ngFor="let col of columns">
                        {{ col.header }}
                    </th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-rowData let-columns="columns" >
                <tr [ngClass]="{'green-row' : rowData.type === 'EXPENSE'}">
                    <td *ngFor="let col of columns">
                        {{ rowData[col.field] }}
                    </td>
                </tr>
            </ng-template>
        </p-table>
    </p-card>

    <p-card *ngIf="showFilters">
        <p-table
            #dt2
            [columns]="cols"
            [value] = "expenses"
            dataKey = 'id'
            [rows] = '5'
            [showCurrentPageReport] ='true'
            [rowsPerPageOptions] ='[5, 10, 25, 50, 75, 100]'
            [loading] ="loading"
            [paginator] ='true'
            currentPageReportTemplate ='showing {first} to {last} of {totalRecords} entries'
            [globalFilterFields] ="['date', 'amount', 'type', 'categorie', 'desc']"
            [tableStyle] = "{'min-width':'75rem'}"
        >
            <ng-template pTemplate="caption">
                <div class="flex">
                    <button type="button" pButton pRipple icon="pi pi-file-excel" (click)="downloadExcel()"
                        class="p-button-sucess mr-2" pTooltip="XLS" tooltipPosition="bottom"></button>
                </div>
                <!-- <div class="flex">
                    <span class="p-input-icon-left ml-auto">
                        <i class="pi pi-search">
                            <input pInputText type="text"
                              placeholder="search Keyword"/>
                        </i>
                    </span>
                </div> -->
            </ng-template>
            <ng-template pTemplate="header" >
                <tr>
                    <th style="width:22%">Date</th>
                    <th style="width:22%">Amount</th>
                    <!-- <th style="width:12%">Type</th> -->
                    <th style="width:22%">Category</th>
                    <th style="width:22%">Description</th>
                </tr>
                <tr>
                    <th>
                        <p-columnFilter type="text" field="date"></p-columnFilter>
                    </th>
                    <th>
                        <p-columnFilter type="text" field="amount"></p-columnFilter>
                    </th>
                    <!-- <th>
                        <p-columnFilter type="text" field="type"></p-columnFilter>
                    </th> -->
                    <th>
                        <p-columnFilter type="text" field="categorie"></p-columnFilter>
                    </th>
                    <th>
                        <p-columnFilter type="text" field="desc"></p-columnFilter>
                    </th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-columns>
                <tr >
                    <td>{{columns.date}}</td>
                    <td [ngStyle]="{'color' : columns.type === 'EXPENSE' ? 'red' : 'green'}">{{columns.amount}}</td>
                    <!-- <td>{{columns.type}}</td> -->
                    <td>{{columns.categorie}}</td>
                    <td>{{columns.desc}}</td>

                </tr>
            </ng-template>
            <ng-template pTemplate="emptymessage">
                <tr>
                    <td colspan="5">No records found</td>
                </tr>
            </ng-template>
        </p-table>
    </p-card>
</div>
